{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\"form\");\nconst [searchInput] = form.elements;\nconst gallery = document.querySelector(\".gallery\");\n\n// Створення елементів бібліотек\niziToast.settings({\n    message: \"Sorry, there are no images matching your search query. Please try again!\",\n    position: \"topRight\",\n    messageSize: \"16px\",\n    displayMode: 2,\n});\nconst simpleGallery = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\nconst loader = document.createElement(\"span\");\nloader.classList.add(\"loader\");\n\n\n\nconst searchParams = new URLSearchParams({\n    key: \"40945002-e125ab8d3394997b1a8dc0871\",\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true\n});\n\nform.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    gallery.innerHTML = \"\";\n    gallery.append(loader)\n    const data = await imgRequest(`https://pixabay.com/api/?${searchParams}&q=${searchInput.value}`);\n    const items = buildGallery(data);\n    gallery.insertAdjacentHTML(\"beforeend\", items.join(\" \"));\n    simpleGallery.refresh();\n    loader.remove();\n});\n\nfunction imgRequest(url) {\n    return  fetch(url)\n        .then(response => {\n            if (!response.ok) throw new Error(response.status);\n            return response.json();\n        })\n        .then(data => {\n            if (data.hits.length === 0) {\n                return iziToast.error();\n            } else {\n                gallery.innerHTML = \"\";\n                gallery.append(loader);\n                return data.hits;\n            }\n        })\n        .catch(err => console.log(err));\n}\n\nfunction buildGallery(data) {\n    return data.map(img => {\n        const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = img;\n        return `<li class=\"gallery-item\">\n            <div class=\"img-wrapper\">\n              <a href=\"${largeImageURL}\">\n                  <img\n                    class=\"gallery-img\"\n                    src=\"${webformatURL}\" \n                    alt=\"${tags}\"\n                    width=\"360\"\n                    height=\"200\">\n              </a> \n            </div>\n            <div class=\"text-wrapper\">\n              <ul class=\"img-info-list\">\n                <li class=\"info-item\">\n                  <h3 class=\"info-title\">likes</h3>\n                  <p class=\"info-text\">${likes}</p>\n                </li>\n                <li class=\"info-item\">\n                  <h3 class=\"info-title\">views</h3>\n                  <p class=\"info-text\">${views}</p>\n                </li>\n                <li class=\"info-item\">\n                  <h3 class=\"info-title\">comments</h3>\n                  <p class=\"info-text\">${comments}</p>\n                </li>\n                <li class=\"info-item\">\n                  <h3 class=\"info-title\">downloads</h3>\n                  <p class=\"info-text\">${downloads}</p>\n                </li>\n              </ul>\n            </div>\n        </li>`\n    })\n}\n\n\n\n\n\n"],"names":["form","searchInput","gallery","iziToast","simpleGallery","SimpleLightbox","loader","searchParams","e","data","imgRequest","items","buildGallery","url","response","err","img","largeImageURL","webformatURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,MAAM,EACpC,CAACC,CAAW,EAAID,EAAK,SACrBE,EAAU,SAAS,cAAc,UAAU,EAGjDC,EAAS,SAAS,CACd,QAAS,2EACT,SAAU,WACV,YAAa,OACb,YAAa,CACjB,CAAC,EACD,MAAMC,EAAgB,IAAIC,EAAe,aAAc,CACnD,aAAc,MACd,aAAc,GAClB,CAAC,EACKC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAI7B,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAC,EAEDP,EAAK,iBAAiB,SAAU,MAAOQ,GAAM,CACzCA,EAAE,eAAc,EAChBN,EAAQ,UAAY,GACpBA,EAAQ,OAAOI,CAAM,EACrB,MAAMG,EAAO,MAAMC,EAAW,4BAA4BH,OAAkBN,EAAY,OAAO,EACzFU,EAAQC,EAAaH,CAAI,EAC/BP,EAAQ,mBAAmB,YAAaS,EAAM,KAAK,GAAG,CAAC,EACvDP,EAAc,QAAO,EACrBE,EAAO,OAAM,CACjB,CAAC,EAED,SAASI,EAAWG,EAAK,CACrB,OAAQ,MAAMA,CAAG,EACZ,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GAAI,MAAM,IAAI,MAAMA,EAAS,MAAM,EACjD,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAKL,GACEA,EAAK,KAAK,SAAW,EACdN,EAAS,SAEhBD,EAAQ,UAAY,GACpBA,EAAQ,OAAOI,CAAM,EACdG,EAAK,KAEnB,EACA,MAAMM,GAAO,QAAQ,IAAIA,CAAG,CAAC,CACtC,CAEA,SAASH,EAAaH,EAAM,CACxB,OAAOA,EAAK,IAAIO,GAAO,CACnB,KAAM,CAAE,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EACjF,MAAO;AAAA;AAAA,yBAEUC;AAAA;AAAA;AAAA,2BAGEC;AAAA,2BACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAScC;AAAA;AAAA;AAAA;AAAA,yCAIAC;AAAA;AAAA;AAAA;AAAA,yCAIAC;AAAA;AAAA;AAAA;AAAA,yCAIAC;AAAA;AAAA;AAAA;AAAA,cAKzC,CAAK,CACL"}